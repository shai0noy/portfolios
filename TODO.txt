### Pleae be carful not to override entire file when updating tasks ###

ON HOLD: Keep track of dividands since purchase! Add to sheet
ON HOLD: Handle splits, etc, name changes
ON HOLD: Support mobile screen sizes
ON HOLD: Better ticker search - free text, multy options to select from
Ticker view should show real divedand gains (%) for same ranges (currently UI Placeholders Added)
Impl actual gain % values in header
Pass forceRefresh to getTickerData to bypass cache
There is web fetch logic in many fiels and components - should move them all to a single file handling fetching data.
In the dashboard rows, IL stock prices show price in NIS annotated with "ag." price should be shown in agorot too
In single ticker view mode, the base price is shown in NIS while the market proce is in agorot. Both should be in agorot
The state/metadata/config sheet should have an entry for the last "live data" rebuild time
Dashboard header - fields should have both percent and absolute change - e.g. value after tax should metnion the percentage left, period change fields should have both value and percent
in the dashboard summary, all chahnges other than day chnage should have smaller font and be placed on a line below
ON HOLD: Use Finhub or marketstack over yahoo if possible or in addition (will reuqire to guide use rto create API key and add it to spreadsheet as part of setup)
ON HOLD: Dashbaord header - portfolio pct grow should take into account the the amount of stock and buy date etc
ON HOLD: Dashbaord header - Add portfolio gain (value&pct) since date (1m,1y,3y,5y,all) taking into account revenue and add transactions since date
DONE: Portfolio list - should show a tax policy name not key
DONE: New portfolio UI - auto populate ID based on name - verify name chars are valid Uppercase a-z and - only

DONE: All yahoo calls shold use https://portfolios.noy-shai.workers.dev/?apiId=yahoo_hist&ticker=GOOG (replace GOOG, return val is the same) - without proxies

DONE:
    Add column to Trasnactions "Source" - fill it only for imports with "Import_yyyymmdd_hhmm" 
    Add column to txns "Orig_Open_Price_At_Date" set to open price of the stock at the date of txn - NOT using a goog finance formula, but rather the open price at the date a known at time of writing
    Add column to txns "Split_Adj_Open_Price" - this is using a goog finance formula
    Add column to txns "Split_Ratio" = Orig_Open_Price_At_Date / split_adj_open_price  -> using dynamic formula
    Add column to txns "Split_Adjusted_Price" = Price / Split_Ratio -> using dynamic formula
    Add column to txns "Split_Adjusted_Qty" = Price * Split_Ratio -> using dynamic formula
    Rename Trasnactions column Price to Original_Price
    Rename Trasnactions column Qty to Original_Qty
    All current logic that reads qty/price should use the adjusted ones. The orignal price/qty are only written to

Low priority:
- Support switching display lang to Hebrew - should also affect stock names when avilable (with cookie to persist)
- DONE: Allow drag and drop CSV in wizard
- Smart layer based tax calc (FIFO selling and per layer taxing)
- Allow fetching Israeli price indecies (eg CPI) - https://api.cbs.gov.il/index/data/price?id=120010&format=json&download=false&startPeriod=01-2000&endPeriod=12-2019
- ON HOLD: Add chart to ticker view - it should allow day range, week, month 1,3,5 years, YTD, max
- ON HOLD: Add portfolio usm chart for dashboard view
- ON HOLD: Allow comparing portfolios to common indecies, eg CPI, SP500, TLV-125
- DONE: Allow exporting CSV, sheet, holding sheet (flattaned)
- ON HOLD: Use Gemini for anlysis and insight
- ON HOLD: Forcast mode, where future txns, vesting are taken into account, and growth of holding is predicted based on custom uesr input or recent trends. Should also include taxes

DONE: Fix TS2322: Type '{ ..., sheetId: string; }' is not assignable to type 'IntrinsicAttributes & TableProps'. Property 'sheetId' does not exist on type 'IntrinsicAttributes & TableProps' in Dashboard.tsx (removed sheetId prop from DashboardTable call).
DONE: Fix TS1484: 'TaseTicker' is a type and must be imported using a type-only import in ticker.ts.
DONE: Important: Improve google login handling - increase buffers, impl todos, make the session last long and require rarely re-login
DONE: Make ILS - agorot conversion much more robust, e.g. improve `const priceInILS = (h.exchange === 'TASE' && h.stockCurrency === 'ILS') ? h.currentPrice / 100 : h.currentPrice`
DONE: Complete priceUnit implementation - Update NewTransaction.tsx and TickerDetails.tsx to use priceUnit.
DONE: Remove unneeded empty lines in Dashboard.tsx
DONE: In ticker view, stock name is too small and should appear before the exchange name
DONE: Implement stateful URLs using react-router-dom to persist view/filters.
DONE: In ticker view, enhanced display of stock name, symbol, base price, data age, refresh button, and verified transaction prefill.
DONE: Addressed color contrast issues in light and dark modes (success/error colors, primary/text legibility).
DONE: Please configure caching and optimize code so that Yahoo fetches are minimized
DONE: Use google finance (in sheet??) instead of https://v6.exchangerate-api.com
DONE: Allow fetching TASE data by numeric ticker ID: e.g. from https://www.globes.co.il/data/webservices/financial.asmx/getInstrument?exchange=tase&symbol=1175819
DONE: Add "New transaction" to ticker viewer
DONE: Rename add trade to New transaction
DONE: Fix syntax error in DashboardTable.tsx (missing closing brace for TableProps interface)
DONE: Fix syntax error in TickerDetails.tsx (missing closing brace for TickerDetailsProps interface)
DONE: Fix ReferenceError: OpenInNewIcon is not defined in TickerDetails.tsx
DONE: Move Refresh Data button to the right side of the toggles and increase space between it to them.
DONE: Add robust error handling to data fetching functions in src/lib/sheets.ts to prevent dashboard loading issues.
DONE: The exchange selector switches when a stock is found - I want it to only be controlled by the user and stay in auto unless changed    
DONE: Make the display price for IL stocks PRICE agorot (storage currency remains ILS, and so does the total value)
DONE: When computing dashboard values, ignore txns with future dates. Show a small warning if any such exists.
DONE: Allow editing portfolios (not their ID!)
DONE: In portfolio headers in the dashboard - add a total value of the portfolio, day gain pct and day gain value, total gain unrealised
DONE: Add  code comments where they will be truly helpful - search through the code, don't be lazy
DONE: Add day change to dash rows and header
DONE: Make google account login last longer or auto renew!
DONE: Populate sectors
DONE: New Transaction UI - make comission field smaller, improve "ticker not found" location
DONE: Improve code comments where truly helpful